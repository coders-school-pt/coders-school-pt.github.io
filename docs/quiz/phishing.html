<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéØ Detetor de Phishing - Protege-te Online!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .score-item {
            text-align: center;
        }

        .score-value {
            font-size: 2em;
            font-weight: bold;
        }

        .content {
            padding: 30px;
        }

        .start-screen {
            text-align: center;
        }

        .start-screen h2 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .start-screen p {
            font-size: 1.1em;
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .tips-box {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            text-align: left;
        }

        .tips-box h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .tips-box ul {
            margin-left: 20px;
        }

        .tips-box li {
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .email-container {
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            display: none;
        }

        .email-container.active {
            display: block;
        }

        .email-header {
            background: #f5f5f5;
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        .email-field {
            margin-bottom: 10px;
            font-size: 0.95em;
        }

        .email-field strong {
            color: #555;
        }

        .email-body {
            padding: 20px;
            background: white;
            font-size: 1em;
            line-height: 1.6;
        }

        .email-body img {
            max-width: 100%;
            height: auto;
            margin: 10px 0;
        }

        .link-preview {
            background: #f9f9f9;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
            word-break: break-all;
        }

        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 15px 30px;
            font-size: 1.1em;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            flex: 1;
            max-width: 200px;
        }

        .btn-safe {
            background: #10b981;
            color: white;
        }

        .btn-safe:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-phishing {
            background: #ef4444;
            color: white;
        }

        .btn-phishing:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .btn-start {
            background: #667eea;
            color: white;
            font-size: 1.2em;
            padding: 15px 40px;
        }

        .btn-start:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
            animation: slideIn 0.3s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d1fae5;
            border-left: 4px solid #10b981;
        }

        .feedback.incorrect {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
        }

        .feedback h3 {
            margin-bottom: 10px;
        }

        .feedback.correct h3 {
            color: #059669;
        }

        .feedback.incorrect h3 {
            color: #dc2626;
        }

        .red-flag {
            background: #fef3c7;
            border-left: 3px solid #f59e0b;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .red-flag strong {
            color: #d97706;
        }

        .progress {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1em;
            color: #667eea;
            font-weight: bold;
        }

        .final-screen {
            text-align: center;
            display: none;
        }

        .final-screen.show {
            display: block;
        }

        .final-score {
            font-size: 3em;
            color: #667eea;
            margin: 20px 0;
        }

        .badge {
            display: inline-block;
            font-size: 5em;
            margin: 20px 0;
        }

        .summary-box {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .summary-box h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .tutorial-screen {
            display: none;
        }

        .tutorial-screen.show {
            display: block;
        }

        .tutorial-card {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            border: 2px solid #667eea;
        }

        .tutorial-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .tutorial-icon {
            font-size: 3em;
            background: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .tutorial-title h3 {
            color: #667eea;
            margin-bottom: 5px;
            font-size: 1.5em;
        }

        .tutorial-subtitle {
            color: #666;
            font-size: 0.9em;
        }

        .example-box {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .example-good {
            border-left: 4px solid #10b981;
        }

        .example-bad {
            border-left: 4px solid #ef4444;
        }

        .example-label {
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .example-good .example-label {
            color: #10b981;
        }

        .example-bad .example-label {
            color: #ef4444;
        }

        .quiz-question {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .quiz-question h4 {
            color: #856404;
            margin-bottom: 15px;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quiz-option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            text-align: left;
        }

        .quiz-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .quiz-option.selected {
            border-color: #667eea;
            background: #e8ebff;
        }

        .quiz-option.correct {
            border-color: #10b981;
            background: #d1fae5;
        }

        .quiz-option.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            color: #065f46;
        }

        .quiz-feedback.incorrect {
            background: #fee2e2;
            border-left: 4px solid #ef4444;
            color: #991b1b;
        }

        .tutorial-progress {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ddd;
            transition: all 0.3s;
        }

        .progress-dot.completed {
            background: #10b981;
        }

        .progress-dot.current {
            background: #667eea;
            transform: scale(1.3);
        }

        .btn-next {
            background: #667eea;
            color: white;
            display: none;
        }

        .btn-next.show {
            display: inline-block;
        }

        .btn-next:hover {
            background: #5568d3;
        }

        .btn-next-email {
            background: #667eea;
            color: white;
            margin-top: 20px;
            display: none;
        }

        .btn-next-email.show {
            display: inline-block;
        }

        .btn-next-email:hover {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Detetor de Phishing</h1>
            <p>√âs capaz de identificar emails falsos?</p>
            <div class="score-board">
                <div class="score-item">
                    <div class="score-value" id="correct">0</div>
                    <div>‚úÖ Corretas</div>
                </div>
                <div class="score-item">
                    <div class="score-value" id="total">0</div>
                    <div>üì® Mensagens</div>
                </div>
                <div class="score-item">
                    <div class="score-value" id="streak">0</div>
                    <div>üî• Sequ√™ncia</div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- Ecr√£ Inicial -->
            <div id="start-screen" class="start-screen">
                <h2>Bem-vindo(a) ao Desafio Anti-Phishing!</h2>
                <p>O <strong>phishing</strong> √© quando criminosos se fazem passar por empresas, jogos ou pessoas de confian√ßa para roubar as tuas informa√ß√µes (passwords, contas de jogos, dados pessoais).</p>
                
                <p style="margin: 20px 0;">‚ö†Ô∏è <strong>Sabias que:</strong> Milhares de jovens perdem contas de Roblox, Instagram e Snapchat todos os anos por causa de burlas online! Alguns at√© s√£o v√≠timas de chantagem.</p>

                <p>Antes do desafio, vamos aprender os <strong>7 sinais de alerta</strong> que te v√£o ajudar a detetar phishing nas redes sociais, jogos e mensagens! üïµÔ∏è</p>
                
                <button class="btn btn-start" onclick="startTutorial()">üìö Vamos Aprender!</button>
            </div>

            <!-- Ecr√£ Tutorial -->
            <div id="tutorial-screen" class="tutorial-screen">
                <div class="tutorial-progress" id="tutorial-progress"></div>
                <div id="tutorial-content"></div>
                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-next" id="btn-next" onclick="nextTutorial()">Pr√≥ximo ‚ûú</button>
                </div>
            </div>

            <!-- Ecr√£ de Transi√ß√£o -->
            <div id="transition-screen" style="display: none; text-align: center;">
                <div class="tutorial-card" style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); border-color: #10b981;">
                    <div style="font-size: 5em; margin-bottom: 20px;">üéâ</div>
                    <h2 style="color: #065f46; margin-bottom: 20px;">Parab√©ns!</h2>
                    <p style="font-size: 1.2em; margin-bottom: 20px;">
                        Completaste as <strong>7 li√ß√µes</strong> e agora sabes como te proteger contra phishing!
                    </p>
                    
                    <div style="background: white; border-radius: 10px; padding: 20px; margin: 25px 0; text-align: left;">
                        <h3 style="color: #10b981; margin-bottom: 15px;">‚úÖ O que aprendeste:</h3>
                        <ul style="line-height: 2;">
                            <li>üìß Identificar remetentes suspeitos</li>
                            <li>‚ö†Ô∏è Reconhecer t√°ticas de urg√™ncia falsa</li>
                            <li>üîó Detetar links perigosos</li>
                            <li>‚úçÔ∏è Notar erros de portugu√™s</li>
                            <li>üéÅ Desconfiar de ofertas imposs√≠veis</li>
                            <li>üìé Evitar anexos inesperados</li>
                            <li>üîê Nunca partilhar informa√ß√µes confidenciais</li>
                        </ul>
                    </div>

                    <p style="font-size: 1.2em; margin: 25px 0;">
                        <strong>Agora vamos testar o que aprendeste!</strong> üéØ
                    </p>
                    
                    <p style="color: #065f46; margin-bottom: 25px;">
                        Vais receber 10 mensagens (emails, DMs, SMS). Usa os teus novos conhecimentos para decidir se cada uma √© segura ou phishing.
                    </p>
                    
                    <button class="btn btn-start" onclick="startGameFromTransition()" style="font-size: 1.3em; padding: 20px 40px;">
                        üöÄ Come√ßar o Desafio!
                    </button>
                </div>
            </div>

            <!-- √Årea do Jogo -->
            <div id="game-area" style="display: none;">
                <div class="progress" id="progress">Mensagem 1 de 10</div>
                
                <div id="email-display"></div>
                
                <div class="buttons">
                    <button class="btn btn-safe" onclick="checkAnswer(false)">‚úÖ Mensagem Segura</button>
                    <button class="btn btn-phishing" onclick="checkAnswer(true)">üö® √â Phishing/Burla!</button>
                </div>

                <div id="feedback" class="feedback"></div>
                
                <div style="text-align: center;">
                    <button class="btn btn-next-email" id="btn-next-email" onclick="nextEmail()">
                        Pr√≥xima Mensagem ‚ûú
                    </button>
                </div>
            </div>

            <!-- Ecr√£ Final -->
            <div id="final-screen" class="final-screen">
                <h2>üéâ Desafio Completo!</h2>
                <div class="badge" id="badge">üèÜ</div>
                <div class="final-score">
                    <span id="final-correct">0</span> / 10
                </div>
                <h3 id="final-message"></h3>
                
                <div class="summary-box">
                    <h3>üìö O que aprendeste:</h3>
                    <ul id="learning-points"></ul>
                </div>

                <button class="btn btn-start" onclick="restartGame()">üîÑ Jogar Novamente</button>
            </div>
        </div>
    </div>

    <script>
        // Tutorial lessons
        const tutorialLessons = [
            {
                icon: "üìß",
                title: "Remetente Suspeito",
                subtitle: "Li√ß√£o 1 de 7",
                content: `
                    <p>O <strong>endere√ßo de email, nome de utilizador ou n√∫mero</strong> √© a primeira coisa a verificar! Criminosos tentam enganar-te usando nomes parecidos com os reais.</p>
                    <p><strong>üí° Isto aplica-se a:</strong> Emails, SMS, Instagram, Discord, Roblox, TikTok, WhatsApp...</p>
                `,
                examples: [
                    {
                        type: "bad",
                        label: "‚ùå Instagram Falso:",
                        content: "@instagram_0fficial ‚Ä¢ Segue de volta para verifica√ß√£o!",
                        note: "Repara: usa '0' (zero) em vez de 'o'! O Instagram oficial √© @instagram, sem mais nada."
                    },
                    {
                        type: "bad",
                        label: "‚ùå SMS Suspeito:",
                        content: "CTT-Portugal: Encomenda retida. Link: ctt-pt.tk/track",
                        note: "CTT verdadeiro usa '.pt', n√£o '.tk'. E nunca enviam SMS com links para dom√≠nios estranhos."
                    },
                    {
                        type: "bad",
                        label: "‚ùå Roblox Falso:",
                        content: "ROBLOX_Admin_Support: D√°-nos a tua password para verificar a conta!",
                        note: "Administradores REAIS do Roblox nunca pedem passwords! E t√™m badge oficial ‚úì"
                    },
                    {
                        type: "good",
                        label: "‚úÖ Discord Leg√≠timo:",
                        content: "Discord ‚Ä¢ noreply@discord.com",
                        note: "Dom√≠nio oficial, sem varia√ß√µes ou n√∫meros estranhos."
                    }
                ],
                quiz: {
                    question: "Recebes uma mensagem no Instagram de '@tiktok_oficial_pt' a dizer que ganhaste um pr√©mio. √â leg√≠timo?",
                    options: [
                        { text: "Sim, tem 'oficial' no nome", correct: false, explanation: "N√£o! Qualquer pessoa pode p√¥r 'oficial' no nome. O TikTok n√£o contacta pelo Instagram!" },
                        { text: "N√£o! O TikTok n√£o usa Instagram para pr√©mios", correct: true, explanation: "Correto! Empresas contactam atrav√©s das suas pr√≥prias plataformas. E verifica sempre se t√™m o s√≠mbolo ‚úì de verifica√ß√£o!" },
                        { text: "Sim, porque tem muitos seguidores", correct: false, explanation: "Seguidores podem ser comprados! Procura sempre o s√≠mbolo ‚úì azul de conta verificada." },
                        { text: "Vou clicar para ver se √© verdade", correct: false, explanation: "Nunca cliques em links suspeitos 'para ver'! Podes ser hackeado!" }
                    ]
                }
            },
            {
                icon: "‚ö†Ô∏è",
                title: "Urg√™ncia Falsa",
                subtitle: "Li√ß√£o 2 de 7",
                content: `
                    <p>Criminosos criam <strong>sensa√ß√£o de urg√™ncia</strong> para te fazer agir sem pensar! "R√ÅPIDO!", "√öLTIMA CHANCE!", "CONTA BLOQUEADA!" s√£o bandeiras vermelhas.</p>
                    <p><strong>üí° Onde acontece:</strong> SMS, DMs no Instagram/TikTok, Discord, mensagens no Roblox, emails, WhatsApp...</p>
                `,
                examples: [
                    {
                        type: "bad",
                        label: "üö® SMS Urgente:",
                        content: "MB WAY: ALERTA! Transa√ß√£o suspeita de 500‚Ç¨. BLOQUEIE AGORA: link-urgente.tk",
                        note: "MB WAY nunca te pressiona assim! Podes sempre verificar no app oficial."
                    },
                    {
                        type: "bad",
                        label: "üö® Roblox Falso:",
                        content: "[ADMIN] Tua conta ser√° APAGADA em 1 HORA! Verifica j√° em roblox-save.com",
                        note: "Roblox nunca apaga contas de repente! E administradores t√™m badge oficial no jogo."
                    },
                    {
                        type: "bad",
                        label: "üö® Instagram DM:",
                        content: "‚ö†Ô∏è ATEN√á√ÉO! Algu√©m est√° a tentar entrar na tua conta! Clica aqui AGORA para proteger!",
                        note: "Cria p√¢nico para te fazer clicar. Instagram envia notifica√ß√µes dentro da app, n√£o por DM."
                    },
                    {
                        type: "good",
                        label: "‚úÖ Notifica√ß√£o Real:",
                        content: "Discord: Novo login detetado de Lisboa. Foi tu? Verifica em Defini√ß√µes > Dispositivos",
                        note: "D√°-te informa√ß√£o mas sem press√£o extrema. Diz-te onde verificar na app oficial."
                    }
                ],
                quiz: {
                    question: "Recebes no WhatsApp: 'üö®URGENTE! Seu n√∫mero ser√° bloqueado em 2h! Confirme AGORA: wa.me/bloqueio'. O que fazes?",
                    options: [
                        { text: "Clico r√°pido porque s√≥ tenho 2 horas", correct: false, explanation: "√â exatamente isso que querem! A urg√™ncia √© falsa para te fazer agir sem pensar." },
                        { text: "Ignoro! WhatsApp nunca bloqueia assim", correct: true, explanation: "Exatamente! WhatsApp avisa dentro da app e d√° tempo razo√°vel. Urg√™ncia extrema = golpe!" },
                        { text: "Partilho com amigos para avis√°-los", correct: false, explanation: "N√£o! Estarias a espalhar o golpe. Apenas bloqueia e reporta." },
                        { text: "Respondo a perguntar se √© verdade", correct: false, explanation: "Nunca respondas a mensagens suspeitas! Podem usar isso para confirmar que o n√∫mero est√° ativo." }
                    ]
                }
            },
            {
                icon: "üîó",
                title: "Links Suspeitos",
                subtitle: "Li√ß√£o 3 de 7",
                content: `
                    <p><strong>NUNCA cliques em links suspeitos!</strong> No telem√≥vel, mant√©m o dedo no link para ver o URL completo antes de clicar.</p>
                    <p><strong>üéØ Cuidado especial:</strong> Links encurtados (bit.ly, tinyurl) escondem o destino real. V√™ sempre onde vais parar!</p>
                `,
                examples: [
                    {
                        type: "bad",
                        label: "‚ùå Link no Discord:",
                        content: "OMG v√™ este jogo gr√°tis! disc0rd-nitro-free.ru/gift",
                        note: "Discord √© '.com', n√£o '.ru'! E Nitro gr√°tis n√£o existe. O '0' (zero) em vez de 'o' √© truque cl√°ssico."
                    },
                    {
                        type: "bad",
                        label: "‚ùå SMS com Link:",
                        content: "Pacote retido nos CTT. Paga 2‚Ç¨: ctt-encomenda.tk/pagar",
                        note: "Dom√≠nio '.tk' √© gratuito e usado em fraudes. CTT real usa ctt.pt e nunca pede pagamento por SMS."
                    },
                    {
                        type: "bad",
                        label: "‚ùå Instagram Story:",
                        content: "GIVEAWAY! Clica: bit.ly/xy3k9s para ganhar iPhone!",
                        note: "Links encurtados escondem o destino. Giveaways reais s√£o no perfil verificado da marca."
                    },
                    {
                        type: "good",
                        label: "‚úÖ Link Verificado:",
                        content: "Novo v√≠deo! youtu.be/dQw4w9WgXcQ (partilhado de dentro da app YouTube)",
                        note: "youtu.be √© o encurtador oficial do YouTube. Mas sempre verifica quem partilhou!"
                    }
                ],
                quiz: {
                    question: "Amigo envia no chat do Roblox: 'FREE ROBUX AQUI: roblox-gems.tk'. O que fazes?",
                    options: [
                        { text: "Clico! Robux gr√°tis!", correct: false, explanation: "STOP! Robux gr√°tis n√£o existe. V√£o roubar a tua conta!" },
                        { text: "N√£o clico! Dom√≠nio falso + Robux gr√°tis = SCAM", correct: true, explanation: "Perfeito! Roblox √© '.com', n√£o '.tk'. E nada √© gr√°tis no Roblox fora do jogo oficial!" },
                        { text: "Pergunto ao amigo se funcionou", correct: false, explanation: "A conta do teu amigo pode estar hackeada a enviar spam! Avisa-o e reporta." },
                        { text: "Partilho com outros amigos", correct: false, explanation: "Nunca! Estarias a ajudar a espalhar um scam que rouba contas!" }
                    ]
                }
            },
            {
                icon: "‚úçÔ∏è",
                title: "Erros de Linguagem",
                subtitle: "Li√ß√£o 4 de 7",
                content: `
                    <p>Muitas mensagens falsas v√™m de outros pa√≠ses e usam <strong>tradutores autom√°ticos</strong>, resultando em erros √≥bvios!</p>
                    <p><strong>‚ö†Ô∏è Aten√ß√£o a:</strong> Portugu√™s brasileiro quando deveria ser europeu, erros gramaticais, emojis estranhos, palavras sem sentido.</p>
                `,
                examples: [
                    {
                        type: "bad",
                        label: "‚ùå SMS com Erros:",
                        content: "Ol√°! Voc√™ ganhou um pr√™mio! Clique aqui para resgatar seu presente gratis!",
                        note: "Usa 'voc√™', 'pr√™mio' (brasileiro), 'resgatar', 'gratis' sem 't'. Empresas portuguesas usam PT-PT."
                    },
                    {
                        type: "bad",
                        label: "‚ùå DM no Instagram:",
                        content: "Oi amigo! Vc foi selecionado p/ verifica√ß√£o azul. Responda p/ confirmar.",
                        note: "'Oi' e 'vc' s√£o muito informais. Instagram oficial n√£o usa abrevia√ß√µes."
                    },
                    {
                        type: "bad",
                        label: "‚ùå Chat do Discord:",
                        content: "üéâüéâüéâPARAB√âNSüéâüéâüéâ Voce √© sorte vencedor! Contate admin rapidamente!!!",
                        note: "Emojis excessivos, 'Voce' sem acento, 'sorte' (sortudo?), '!!!' exagerado. Red flags!"
                    },
                    {
                        type: "good",
                        label: "‚úÖ Mensagem Real:",
                        content: "Ol√°! A tua encomenda foi enviada e chegar√° em 2-3 dias √∫teis. Obrigado!",
                        note: "Portugu√™s correto, profissional, sem exageros. Linguagem natural e clara."
                    }
                ],
                quiz: {
                    question: "WhatsApp de n√∫mero desconhecido: 'Oi! Voc√™ ganhou 100‚Ç¨! Me envia seu dados banc√°rios para transferencia'. √â leg√≠timo?",
                    options: [
                        { text: "Sim! S√£o 100‚Ç¨ gr√°tis!", correct: false, explanation: "N√£o! Al√©m do dinheiro imposs√≠vel, a linguagem brasileira ('oi', 'voc√™', 'me envia') √© suspeita." },
                        { text: "N√£o! Erros + dinheiro gr√°tis + dados banc√°rios = SCAM total", correct: true, explanation: "Perfeito! Juntaste todos os sinais: linguagem errada, oferta imposs√≠vel, e pede dados sens√≠veis!" },
                        { text: "Respondo para saber mais detalhes", correct: false, explanation: "Nunca respondas! Confirma que o teu n√∫mero est√° ativo e receber√°s mais spam." },
                        { text: "√â leg√≠timo porque tem o c√≥digo de Portugal +351", correct: false, explanation: "N√∫meros podem ser falsificados (spoofing)! C√≥digos de pa√≠s n√£o garantem legitimidade." }
                    ]
                }
            },
            {
                icon: "üéÅ",
                title: "Ofertas Imposs√≠veis",
                subtitle: "Li√ß√£o 5 de 7",
                content: `
                    <p><strong>"Se parece bom demais para ser verdade, provavelmente √© mentira!"</strong></p>
                    <p>V-Bucks gr√°tis, Robux infinitos, c√≥digos para Fortnite, iPhones de borla... s√£o SEMPRE scams!</p>
                    <p><strong>ü§î Pergunta-te:</strong> Porque dariam isto de gra√ßa? Como ganham dinheiro? Faz sentido?</p>
                `,
                examples: [
                    {
                        type: "bad",
                        label: "üéØ V√≠deo do YouTube:",
                        content: "üî• ROBUX INFINITOS GR√ÅTIS 2026! üî• FUNCIONANDO! Link na descri√ß√£o! üëá",
                        note: "Robux infinitos n√£o existem! V√≠deos assim roubam contas. Roblox NUNCA d√° Robux gr√°tis."
                    },
                    {
                        type: "bad",
                        label: "üéØ Story do Instagram:",
                        content: "üò± SORTEIOO! iPhone 15 Pro! Segue + Marca 3 amigos + Clica no link! üéÅ",
                        note: "Contas n√£o verificadas n√£o fazem sorteios reais. Querem seguidores e dados!"
                    },
                    {
                        type: "bad",
                        label: "üéØ Discord/Roblox:",
                        content: "[ADMIN] C√≥digo secreto de 10.000 Robux: USE C√ìDIGO 'FREE10K' no site rbx-codes.net",
                        note: "Administradores reais nunca aparecem assim. C√≥digos 'secretos' roubam contas!"
                    },
                    {
                        type: "good",
                        label: "‚úÖ Promo√ß√£o Real:",
                        content: "PlayStation Store: Jogos com 50% desconto este fim de semana! V√™ na store.playstation.com",
                        note: "Desconto realista, de fonte oficial, no site verdadeiro. N√£o pede dados nem promete coisas gr√°tis."
                    }
                ],
                quiz: {
                    question: "Amigo envia: 'Usei este site e recebi 1000 V-Bucks! Tenta: fortnite-vbucks.tk'. Deves clicar?",
                    options: [
                        { text: "Sim! Se funcionou com ele...", correct: false, explanation: "A conta dele foi HACKEADA! Est√° a enviar spam sem saber. V-Bucks gr√°tis n√£o existem!" },
                        { text: "N√£o! V-Bucks gr√°tis = SCAM. Aviso o amigo", correct: true, explanation: "Exato! Avisa o amigo que foi hackeado. V-Bucks s√≥ se compram oficialmente na Epic Games!" },
                        { text: "Vou usar email falso para testar", correct: false, explanation: "Mesmo com email falso, podes apanhar v√≠rus ou ter outros dados roubados!" },
                        { text: "√â seguro porque foi amigo que enviou", correct: false, explanation: "Contas hackeadas enviam mensagens autom√°ticas aos amigos. Nunca confies cegamente!" }
                    ]
                }
            },
            {
                icon: "üìé",
                title: "Ficheiros e QR Codes Suspeitos",
                subtitle: "Li√ß√£o 6 de 7",
                content: `
                    <p><strong>NUNCA abras ficheiros inesperados ou scanneies QR codes de desconhecidos!</strong> Podem conter v√≠rus.</p>
                    <p><strong>‚ö†Ô∏è Especialmente perigosos:</strong> APKs (apps Android), ficheiros .exe, ZIPs, e QR codes de fontes n√£o confi√°veis.</p>
                `,
                examples: [
                    {
                        type: "bad",
                        label: "üö® WhatsApp Suspeito:",
                        content: "Oi! V√™ estas fotos da festa üòÇ [festa_fotos.apk - 2.3 MB]",
                        note: "PERIGO! .apk √© instalador Android que pode ser v√≠rus. Fotos s√£o .jpg, n√£o .apk!"
                    },
                    {
                        type: "bad",
                        label: "üö® Discord/Telegram:",
                        content: "Novo hack para jogos! Download: game_hack.exe",
                        note: "Ficheiros .exe podem ser v√≠rus! 'Hacks' s√£o quase sempre malware que rouba contas."
                    },
                    {
                        type: "bad",
                        label: "üö® QR Code Suspeito:",
                        content: "Papel colado na rua: 'Scanneia para ganhar Robux gr√°tis! üéÅ'",
                        note: "QR codes em locais p√∫blicos podem levar a sites maliciosos! Nunca scanneies QR de desconhecidos."
                    },
                    {
                        type: "good",
                        label: "‚úÖ Partilha Segura:",
                        content: "Professora no Google Classroom: [Trabalho_Casa.pdf - 150 KB]",
                        note: "De fonte conhecida e confi√°vel, formato apropriado (PDF), contexto esperado."
                    }
                ],
                quiz: {
                    question: "Recebes SMS: 'Pacote retido. Pague taxa: [QR Code]'. Deves scannear?",
                    options: [
                        { text: "Sim, para saber quanto √©", correct: false, explanation: "N√ÉO! CTT nunca usa QR codes por SMS. Pode levar a site que rouba dados banc√°rios!" },
                        { text: "N√£o! SMS + QR + Pagamento = FRAUDE cl√°ssica", correct: true, explanation: "Correto! Esta √© uma fraude muito comum. CTT contacta por carta ou no site oficial ctt.pt!" },
                        { text: "Scanneia mas n√£o pagues", correct: false, explanation: "Ao scannear j√° podes ser infetado ou levado a site falso! Nem abras!" },
                        { text: "Partilho o SMS para outros opinarem", correct: false, explanation: "Nunca partilhes scams! Podes enganar algu√©m que seja menos atento." }
                    ]
                }
            },
            {
                icon: "üîê",
                title: "Pedidos de Informa√ß√£o Pessoal",
                subtitle: "Li√ß√£o 7 de 7",
                content: `
                    <p><strong>REGRA DE OURO: Empresas, jogos e redes sociais NUNCA pedem passwords, c√≥digos ou dados pessoais por mensagem!</strong></p>
                    <p>Nem por email, SMS, WhatsApp, Discord, Instagram DM, chat de jogo... NADA!</p>
                `,
                examples: [
                    {
                        type: "bad",
                        label: "üö´ Roblox Falso:",
                        content: "[ROBLOX ADMIN] Precisamos verificar tua conta. Envia tua password e email para evitar ban.",
                        note: "100% SCAM! Roblox NUNCA pede passwords. Administradores n√£o contactam assim."
                    },
                    {
                        type: "bad",
                        label: "üö´ Instagram DM:",
                        content: "Ol√°! Para receberes o badge de verifica√ß√£o ‚úì, confirma: Email, Password, Data de nascimento",
                        note: "Instagram n√£o d√° verifica√ß√£o por DM! E NUNCA pede passwords. √â golpe para roubar conta."
                    },
                    {
                        type: "bad",
                        label: "üö´ SMS Banc√°rio:",
                        content: "BCP: Bloqueio suspeito. Confirme: N√∫mero de conta, cart√£o, c√≥digo MB WAY. Responda J√Å.",
                        note: "Bancos NUNCA pedem dados assim! Nem por SMS, nem por telefone, nem por email!"
                    },
                    {
                        type: "good",
                        label: "‚úÖ Comunica√ß√£o Leg√≠tima:",
                        content: "Epic Games: Novo login de dispositivo desconhecido. Se n√£o foste tu, muda a password em epicgames.com/account",
                        note: "Avisa-te mas n√£o pede dados. Diz-te onde TU vais (site oficial) para fazer altera√ß√µes."
                    }
                ],
                quiz: {
                    question: "'Administrador' no Discord pede c√≥digo de autentica√ß√£o de 2 fatores 'para verificar seguran√ßa'. D√°s?",
                    options: [
                        { text: "Sim, √© admin e quer ajudar", correct: false, explanation: "NUNCA! Esse c√≥digo d√° acesso total √† tua conta. Administradores reais nunca pedem!" },
                        { text: "N√ÉO! C√≥digo 2FA √© como a password - nunca partilho!", correct: true, explanation: "PERFEITO! C√≥digo 2FA = chave da tua conta. Dar isso = perder a conta imediatamente!" },
                        { text: "Pergunto primeiro se √© admin verdadeiro", correct: false, explanation: "Ele vai dizer que sim! Admins reais t√™m badges e n√£o pedem c√≥digos privados." },
                        { text: "Dou s√≥ os primeiros 3 n√∫meros", correct: false, explanation: "Dar QUALQUER parte do c√≥digo √© perigoso! Nunca partilhes, nem parcialmente!" }
                    ]
                }
            }
        ];

        let currentLesson = 0;
        let lessonCompleted = Array(tutorialLessons.length).fill(false);

        // Shuffle function to randomize array order
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startTutorial() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('tutorial-screen').classList.add('show');
            currentLesson = 0;
            
            // Shuffle quiz options for each lesson
            tutorialLessons.forEach(lesson => {
                lesson.quiz.options = shuffleArray(lesson.quiz.options);
            });
            
            showTutorialLesson();
            updateTutorialProgress();
        }

        function showTutorialLesson() {
            const lesson = tutorialLessons[currentLesson];
            let examplesHTML = '';
            
            lesson.examples.forEach(example => {
                examplesHTML += `
                    <div class="example-box example-${example.type}">
                        <div class="example-label">${example.label}</div>
                        <div style="margin: 10px 0; font-family: monospace; background: #f9f9f9; padding: 10px; border-radius: 5px;">
                            ${example.content}
                        </div>
                        <div style="color: #666; font-size: 0.9em; margin-top: 8px;">
                            üí° ${example.note}
                        </div>
                    </div>
                `;
            });

            let optionsHTML = '';
            lesson.quiz.options.forEach((option, index) => {
                optionsHTML += `
                    <button class="quiz-option" onclick="checkQuizAnswer(${index})" id="option-${index}">
                        ${option.text}
                    </button>
                `;
            });

            const html = `
                <div class="tutorial-card">
                    <div class="tutorial-header">
                        <div class="tutorial-icon">${lesson.icon}</div>
                        <div class="tutorial-title">
                            <h3>${lesson.title}</h3>
                            <div class="tutorial-subtitle">${lesson.subtitle}</div>
                        </div>
                    </div>
                    ${lesson.content}
                    ${examplesHTML}
                    <div class="quiz-question">
                        <h4>ü§î Testa o teu conhecimento:</h4>
                        <p><strong>${lesson.quiz.question}</strong></p>
                        <div class="quiz-options">
                            ${optionsHTML}
                        </div>
                        <div id="quiz-feedback" class="quiz-feedback"></div>
                    </div>
                </div>
            `;

            document.getElementById('tutorial-content').innerHTML = html;
            document.getElementById('btn-next').classList.remove('show');
        }

        function checkQuizAnswer(selectedIndex) {
            const lesson = tutorialLessons[currentLesson];
            const option = lesson.quiz.options[selectedIndex];
            const feedback = document.getElementById('quiz-feedback');
            const selectedButton = document.getElementById(`option-${selectedIndex}`);
            
            if (option.correct) {
                // Correct answer - disable all buttons and show success
                const buttons = document.querySelectorAll('.quiz-option');
                buttons.forEach((btn, index) => {
                    btn.disabled = true;
                    btn.style.cursor = 'not-allowed';
                    if (lesson.quiz.options[index].correct) {
                        btn.classList.add('correct');
                    }
                });

                feedback.className = 'quiz-feedback show correct';
                feedback.innerHTML = `
                    <strong>‚úÖ Correto! Excelente!</strong><br>
                    ${option.explanation}
                `;

                // Mark lesson as completed and show next button
                lessonCompleted[currentLesson] = true;
                document.getElementById('btn-next').classList.add('show');
                updateTutorialProgress();
            } else {
                // Wrong answer - mark as incorrect but allow retry
                selectedButton.classList.add('incorrect');
                selectedButton.disabled = true;
                selectedButton.style.cursor = 'not-allowed';

                feedback.className = 'quiz-feedback show incorrect';
                feedback.innerHTML = `
                    <strong>‚ùå N√£o √© essa...</strong><br>
                    ${option.explanation}
                    <br><br>
                    <strong>üí° Dica:</strong> Tenta outra vez! Rel√™ os exemplos acima se precisares de ajuda.
                `;
            }
        }

        function updateTutorialProgress() {
            let html = '';
            for (let i = 0; i < tutorialLessons.length; i++) {
                let className = 'progress-dot';
                if (i < currentLesson) className += ' completed';
                if (i === currentLesson) className += ' current';
                html += `<div class="${className}"></div>`;
            }
            document.getElementById('tutorial-progress').innerHTML = html;
        }

        function nextTutorial() {
            currentLesson++;
            if (currentLesson < tutorialLessons.length) {
                showTutorialLesson();
                updateTutorialProgress();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                // Tutorial completed, show transition screen
                document.getElementById('tutorial-screen').classList.remove('show');
                document.getElementById('transition-screen').style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function startGameFromTransition() {
            document.getElementById('transition-screen').style.display = 'none';
            startGame();
        }

        const emails = [
            {
                isPhishing: true,
                from: "RobIox_Rewards@rbxfree-generator.com",
                subject: "üéÆ 5000 ROBUX GR√ÅTIS - Celebra√ß√£o 20M Utilizadores!",
                body: `
                    <p>üéâ <strong>PARAB√âNS JOGADOR!</strong> üéâ</p>
                    <p>A Roblox est√° a celebrar 20 milh√µes de utilizadores em Portugal e TU foste selecionado para receber <strong>5000 ROBUX GR√ÅTIS!</strong></p>
                    <p>Para reclamar os teus Robux:</p>
                    <ol>
                        <li>Clica no link abaixo</li>
                        <li>Insere o teu username do Roblox</li>
                        <li>Completa uma verifica√ß√£o r√°pida (1 minuto)</li>
                        <li>Os Robux aparecem na tua conta em 24h!</li>
                    </ol>
                    <div class="link-preview">http://rbxfree-generator.com/claim?user=pt&robux=5000</div>
                    <p><strong>‚è∞ ATEN√á√ÉO:</strong> Esta oferta expira em 30 minutos! S√≥ os primeiros 100 jogadores recebem!</p>
                    <p>N√£o percas esta oportunidade! üöÄ</p>
                    <p>Equipa Roblox Rewards</p>
                `,
                redFlags: [
                    "üìß Email falso: 'RobIox' com 'I' mai√∫sculo! O Roblox oficial usa @roblox.com",
                    "üéÅ Robux gr√°tis N√ÉO EXISTEM: a Roblox NUNCA d√° Robux de gra√ßa por email",
                    "‚ö†Ô∏è Urg√™ncia falsa: '30 minutos' e 'primeiros 100' s√£o t√°ticas de press√£o",
                    "üîó Link suspeito: 'rbxfree-generator.com' n√£o √© roblox.com",
                    "üîê Pede o teu username: primeiro passo para roubar a tua conta!"
                ],
                explanation: "N√ÉO EXISTE forma de ganhar Robux gr√°tis! Sites que prometem isto querem roubar a tua conta ou instalar malware. A Roblox oficial confirma: qualquer oferta de 'Robux gr√°tis' √© SEMPRE uma burla. S√≥ podes comprar Robux no site oficial ou ganhar atrav√©s do programa de criadores."
            },
            {
                isPhishing: true,
                from: "DM do Instagram: @iphone.giveaway.oficial.pt",
                subject: "üì± DM Instagram: Ganhaste um iPhone 15!",
                body: `
                    <p><strong>@iphone.giveaway.oficial.pt</strong> enviou-te uma mensagem:</p>
                    <div style="background: #f0f0f0; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        <p>Ol√°√°√°! üéâüéâ</p>
                        <p>Vimos que seguiste a nossa p√°gina e participaste no sorteio!</p>
                        <p>PARAB√âNS! üèÜ Foste um dos 3 vencedores do iPhone 15 Pro Max!</p>
                        <p>Para receberes o teu pr√©mio, s√≥ precisas de:</p>
                        <p>1Ô∏è‚É£ Clicar neste link: bit.ly/iphone15-premio-pt</p>
                        <p>2Ô∏è‚É£ Preencher os dados de envio</p>
                        <p>3Ô∏è‚É£ Pagar s√≥ 4,99‚Ç¨ de portes (oferta especial!)</p>
                        <p>Responde r√°pido porque temos de enviar hoje! üì¶‚ú®</p>
                    </div>
                    <p><em>Conta: 2.3k seguidores ‚Ä¢ Sem verifica√ß√£o</em></p>
                `,
                redFlags: [
                    "üì± Conta sem verifica√ß√£o: marcas reais t√™m o ‚úì azul verificado",
                    "üéÅ Pr√©mio que n√£o pediste: n√£o te lembras de participar em nenhum sorteio?",
                    "üí≥ Pede pagamento: pr√©mios reais NUNCA pedem dinheiro para 'portes'",
                    "üîó Link encurtado (bit.ly): esconde o verdadeiro destino - pode ser phishing",
                    "‚ö†Ô∏è Press√£o: 'responde r√°pido', 'enviar hoje' s√£o t√°ticas de urg√™ncia",
                    "üë• Poucos seguidores: 2.3k √© muito pouco para uma marca que d√° iPhones"
                ],
                explanation: "Sorteios falsos no Instagram s√£o muito comuns! Marcas verdadeiras contactam-te por canais oficiais verificados, NUNCA pedem dinheiro para enviar pr√©mios, e n√£o usam links encurtados. Se ganhaste algo, a marca entra em contacto pelo perfil oficial com ‚úì azul."
            },
            {
                isPhishing: true,
                from: "Snapchat: utilizador desconhecido",
                subject: "üëª Snap de desconhecido: 'Adicionei-te por engano'",
                body: `
                    <p><strong>Snap recebido de @jessica_model_2009:</strong></p>
                    <div style="background: #FFFC00; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        <p>heyy desculpa adicionei-te por engano ahahah üòÖ</p>
                        <p>mas j√° agora √©s giro/a! de onde √©s?</p>
                        <p>tenho 16 anos, tu?</p>
                        <p>podemos ser amigos? üíï</p>
                        <p>adiciona-me no insta: @jessica.modelo.real</p>
                    </div>
                    <p style="margin-top: 15px;"><strong>Mais tarde...</strong></p>
                    <div style="background: #FFFC00; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        <p>tens snap privado? üòè</p>
                        <p>manda-me uma foto tua? eu mando uma minha primeiro</p>
                        <p>prometo que fica s√≥ entre n√≥s...</p>
                    </div>
                `,
                redFlags: [
                    "üö® PERIGO EXTREMO: Este padr√£o √© t√≠pico de 'sextortion' (chantagem sexual)",
                    "üë§ Perfil falso: 'adicionei por engano' √© uma desculpa cl√°ssica para iniciar conversa",
                    "üì∑ Pede fotos pessoais: NUNCA envies fotos √≠ntimas a desconhecidos!",
                    "üé≠ Finge ter a tua idade: muitos s√£o adultos a fingir ser jovens",
                    "üîó Quer mudar de plataforma: para ter menos controlo/den√∫ncias"
                ],
                explanation: "CUIDADO! Este √© um dos golpes mais perigosos: sextortion. Criminosos fingem ser jovens, pedem fotos √≠ntimas e depois amea√ßam partilhar com amigos/fam√≠lia se n√£o pagares. Em 2024, milhares de jovens foram v√≠timas disto. NUNCA envies fotos √≠ntimas a ningu√©m online. Se isto acontecer, conta a um adulto de confian√ßa - n√£o tens culpa e podes denunciar!"
            },
            {
                isPhishing: false,
                from: "noreply@id.roblox.com",
                subject: "C√≥digo de verifica√ß√£o Roblox",
                body: `
                    <p>Ol√°,</p>
                    <p>Recebemos um pedido para iniciar sess√£o na tua conta Roblox a partir de um novo dispositivo.</p>
                    <p>O teu c√≥digo de verifica√ß√£o √©: <strong style="font-size: 1.5em; letter-spacing: 3px;">847293</strong></p>
                    <p>Este c√≥digo expira em 15 minutos.</p>
                    <p><strong>N√£o pediste este c√≥digo?</strong></p>
                    <p>Se n√£o tentaste iniciar sess√£o, algu√©m pode estar a tentar aceder √† tua conta. Recomendamos que mudes a tua password em roblox.com.</p>
                    <p>Para mais ajuda, visita o nosso centro de suporte em help.roblox.com</p>
                    <p>Obrigado,<br>Equipa Roblox</p>
                `,
                redFlags: [],
                explanation: "Email leg√≠timo do Roblox: vem do dom√≠nio oficial (@id.roblox.com), d√° um c√≥digo de uso √∫nico, n√£o tem links suspeitos nem pede a tua password. Nota que NUNCA deves partilhar c√≥digos de verifica√ß√£o com ningu√©m - nem mesmo 'amigos' que pe√ßam!"
            },
            {
                isPhishing: true,
                from: "Discord DM: ModeradorRoblox#0001",
                subject: "üéÆ Mensagem Discord: 'A tua conta vai ser banida'",
                body: `
                    <p><strong>ModeradorRoblox#0001</strong> enviou-te uma DM:</p>
                    <div style="background: #36393f; color: white; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        <p>‚ö†Ô∏è <strong>AVISO OFICIAL ROBLOX</strong> ‚ö†Ô∏è</p>
                        <p>Ol√° jogador,</p>
                        <p>Detet√°mos atividade suspeita na tua conta Roblox. Algu√©m reportou-te por uso de exploits/hacks.</p>
                        <p>A tua conta ser√° <strong>PERMANENTEMENTE BANIDA</strong> nas pr√≥ximas 24 horas se n√£o verificares que √©s o dono leg√≠timo.</p>
                        <p>Para evitar o ban, precisamos que:</p>
                        <p>1. Acedas a: roblox-verification.com/appeal</p>
                        <p>2. Fa√ßas login com a tua conta</p>
                        <p>3. Confirmes os teus dados</p>
                        <p>Se n√£o fizeres isto, perdes todos os teus Robux e itens.</p>
                        <p>- Equipa de Modera√ß√£o Roblox</p>
                    </div>
                `,
                redFlags: [
                    "üìß Roblox NUNCA contacta por Discord DM para assuntos de conta",
                    "üîó Link falso: 'roblox-verification.com' N√ÉO √© o site oficial (roblox.com)",
                    "‚ö†Ô∏è Amea√ßa de ban: t√°tica de medo para te fazer agir sem pensar",
                    "üîê Pede login: querem roubar a tua password!",
                    "üë§ Moderadores falsos: qualquer um pode criar uma conta com esse nome no Discord"
                ],
                explanation: "A Roblox NUNCA contacta jogadores por Discord, WhatsApp ou outras apps! Comunica√ß√µes oficiais v√™m apenas por email oficial ou notifica√ß√µes dentro do pr√≥prio Roblox. Se receberes mensagens assim, √© 100% burla. Ignora, bloqueia e reporta!"
            },
            {
                isPhishing: true,
                from: "SMS: +351 9XX XXX XXX",
                subject: "üì± SMS: Encomenda retida nos CTT",
                body: `
                    <p><strong>Mensagem de texto recebida:</strong></p>
                    <div style="background: #e8e8e8; padding: 15px; border-radius: 10px; margin: 10px 0; font-family: monospace;">
                        <p>CTT: A sua encomenda EC938271625PT esta retida por falta de pagamento de taxa alfandegaria de 2,99‚Ç¨.</p>
                        <p>Efetue o pagamento em 24h para evitar devolucao:</p>
                        <p>ctt-pagamentos.com/tracking</p>
                    </div>
                    <p style="color: #666; font-size: 0.9em;"><em>Recebido √†s 14:32</em></p>
                `,
                redFlags: [
                    "üì± SMS de n√∫mero desconhecido: CTT usam n√∫meros oficiais identificados",
                    "üîó Link falso: o site oficial dos CTT √© ctt.pt, n√£o 'ctt-pagamentos.com'",
                    "üí≥ Pede pagamento urgente: t√°ctica cl√°ssica de phishing",
                    "‚úçÔ∏è Erros ortogr√°ficos: 'alfandegaria' em vez de 'alfandeg√°ria', falta de acentos",
                    "‚ö†Ô∏è Urg√™ncia: '24h para evitar devolu√ß√£o' - press√£o para n√£o pensares"
                ],
                explanation: "SMS de encomendas falsas s√£o muito comuns! Os CTT verdadeiros enviam notifica√ß√µes pela app oficial ou por cartas. Nunca cliques em links de SMS suspeitos. Se tiveres d√∫vidas sobre uma encomenda real, vai diretamente a ctt.pt e usa o c√≥digo de rastreio."
            },
            {
                isPhishing: false,
                from: "noreply@spotify.com",
                subject: "O teu resumo Spotify Wrapped 2025",
                body: `
                    <p>Ol√°,</p>
                    <p>O teu ano em m√∫sica chegou! üéµ</p>
                    <p>Em 2025, ouviste <strong>23.847 minutos</strong> de m√∫sica no Spotify.</p>
                    <p><strong>O teu top 5 artistas:</strong></p>
                    <ul>
                        <li>1. Taylor Swift</li>
                        <li>2. Bad Bunny</li>
                        <li>3. The Weeknd</li>
                        <li>4. Doja Cat</li>
                        <li>5. Olivia Rodrigo</li>
                    </ul>
                    <p>Descobre mais sobre o teu ano em m√∫sica na app Spotify ou em spotify.com/wrapped</p>
                    <p>Obrigado por ouvires connosco,<br>Equipa Spotify</p>
                `,
                redFlags: [],
                explanation: "Email leg√≠timo do Spotify: dom√≠nio oficial (@spotify.com), conte√∫do personalizado sem pedir dados, link para o site oficial (spotify.com), tom amig√°vel sem urg√™ncia. Emails de resumo anual como o Wrapped s√£o normais e seguros."
            },
            {
                isPhishing: true,
                from: "TikTok DM: @verified_tiktoker_oficial",
                subject: "üé¨ TikTok: 'Quero usar o teu v√≠deo!'",
                body: `
                    <p><strong>@verified_tiktoker_oficial</strong> (847K seguidores) comentou no teu v√≠deo e enviou DM:</p>
                    <div style="background: #010101; color: white; padding: 15px; border-radius: 10px; margin: 10px 0;">
                        <p>omggg adoro o teu conte√∫do!! üî•üî•</p>
                        <p>sou criador verificado e quero fazer uma collab contigo!</p>
                        <p>pago 50‚Ç¨ para usar este teu v√≠deo no meu canal üí∞</p>
                        <p>s√≥ precisas de preencher este formul√°rio para receber o pagamento:</p>
                        <p>tiktok-creator-payments.com/form</p>
                        <p>responde r√°pido pq tenho outras pessoas interessadas!!</p>
                    </div>
                    <p><em>Nota: conta criada h√° 2 semanas, sem ‚úì de verifica√ß√£o real</em></p>
                `,
                redFlags: [
                    "‚úì Verifica√ß√£o falsa: o nome diz 'verified' mas n√£o tem o badge real do TikTok",
                    "üí∞ Dinheiro f√°cil: ofertas de pagamento por DM s√£o quase sempre burla",
                    "üîó Link externo suspeito: 'tiktok-creator-payments.com' n√£o √© do TikTok",
                    "‚ö†Ô∏è Press√£o: 'responde r√°pido' e 'outras pessoas interessadas'",
                    "üìÖ Conta recente: criadores reais com 847K seguidores n√£o t√™m contas de 2 semanas"
                ],
                explanation: "Burlas de 'colabora√ß√£o' no TikTok s√£o muito comuns! Criadores reais verificados t√™m o ‚úì oficial (n√£o no nome), n√£o pedem dados por formul√°rios externos, e pagamentos s√£o feitos por plataformas seguras. Se parece bom demais para ser verdade, provavelmente √© burla!"
            },
            {
                isPhishing: true,
                from: "seguranca@bancoportugal-verificacao.tk",
                subject: "üö® URGENTE: Confirme sua conta em 24 horas",
                body: `
                    <p>Prezado cliente,</p>
                    <p>Detectamos uma atividade suspeita em sua conta banc√°ria. Por raz√µes de seguran√ßa, <strong>voc√™ tem 24 horas</strong> para confirmar seus dados ou sua conta ser√° permanentemente bloqueada.</p>
                    <p><strong>Clique aqui imediatamente para verificar:</strong></p>
                    <div class="link-preview">http://banco-portugal.tk/verificacao-urgente.php?id=98347</div>
                    <p>Precisamos que confirme:</p>
                    <ul>
                        <li>N√∫mero de conta</li>
                        <li>Password do homebanking</li>
                        <li>C√≥digo do cart√£o de coordenadas</li>
                    </ul>
                    <p><strong>ATEN√á√ÉO:</strong> N√£o responda a este email. Use apenas o link acima.</p>
                    <p>Departamento de Seguran√ßa<br>Banco Portugal</p>
                `,
                redFlags: [
                    "üìß Dom√≠nio falso: '.tk' √© gratuito e usado em burlas (bancos usam .pt ou .com)",
                    "‚ö†Ô∏è Urg√™ncia extrema: '24 horas ou conta bloqueada'",
                    "üîê Pede password e c√≥digos: bancos NUNCA pedem isto por email!",
                    "‚úçÔ∏è Portugu√™s brasileiro: 'sua' em vez de 'a sua', 'voc√™' em vez de 'o cliente'",
                    "üîó Link suspeito: n√£o √© o site oficial de nenhum banco portugu√™s"
                ],
                explanation: "Bancos NUNCA pedem passwords, c√≥digos ou dados do cart√£o por email! Se receberes algo assim, √© 100% burla. Em caso de d√∫vida, liga para o n√∫mero oficial do teu banco (que est√° no cart√£o) ou vai √† app oficial. Nunca cliques em links de emails."
            },
            {
                isPhishing: false,
                from: "no-reply@steampowered.com",
                subject: "A tua Lista de Desejos - Jogo em promo√ß√£o!",
                body: `
                    <p>Ol√°,</p>
                    <p>Um jogo da tua Lista de Desejos est√° em promo√ß√£o!</p>
                    <p><strong>Hollow Knight</strong></p>
                    <p>Pre√ßo original: 14,99‚Ç¨</p>
                    <p>Pre√ßo atual: <strong>7,49‚Ç¨ (-50%)</strong></p>
                    <p>Esta promo√ß√£o termina a 20 de janeiro de 2026.</p>
                    <p>Para ver a tua Lista de Desejos completa, visita store.steampowered.com</p>
                    <p>Boas compras,<br>Equipa Steam</p>
                    <p style="font-size: 0.8em; color: #666;">Para deixares de receber estes emails, altera as tuas prefer√™ncias nas defini√ß√µes da conta Steam.</p>
                `,
                redFlags: [],
                explanation: "Email leg√≠timo da Steam: dom√≠nio oficial (@steampowered.com), refere um jogo que tu pr√≥prio adicionaste √† lista de desejos, n√£o pede dados pessoais, link para o site oficial, e oferece op√ß√£o de cancelar notifica√ß√µes. Promo√ß√µes da Steam s√£o seguras quando v√™m do email oficial!"
            }
        ];

        let currentEmail = 0;
        let correctAnswers = 0;
        let streak = 0;
        let answeredEmails = [];

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-area').style.display = 'block';
            currentEmail = 0;
            correctAnswers = 0;
            streak = 0;
            answeredEmails = [];
            
            // Embaralhar emails
            emails.sort(() => Math.random() - 0.5);
            
            updateScores();
            showEmail();
        }

        function showEmail() {
            const email = emails[currentEmail];
            document.getElementById('progress').textContent = `Mensagem ${currentEmail + 1} de ${emails.length}`;
            
            const emailHTML = `
                <div class="email-container active">
                    <div class="email-header">
                        <div class="email-field"><strong>De:</strong> ${email.from}</div>
                        <div class="email-field"><strong>Assunto:</strong> ${email.subject}</div>
                    </div>
                    <div class="email-body">${email.body}</div>
                </div>
            `;
            
            document.getElementById('email-display').innerHTML = emailHTML;
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
        }

        function checkAnswer(userSaysPhishing) {
            const email = emails[currentEmail];
            const isCorrect = userSaysPhishing === email.isPhishing;
            
            // Disable answer buttons after selection
            document.querySelector('.btn-safe').disabled = true;
            document.querySelector('.btn-phishing').disabled = true;
            
            answeredEmails.push({
                isCorrect,
                isPhishing: email.isPhishing,
                subject: email.subject
            });

            if (isCorrect) {
                correctAnswers++;
                streak++;
                showFeedback(true, email);
            } else {
                streak = 0;
                showFeedback(false, email);
            }
            
            updateScores();
            
            // Show next email button instead of auto-progressing
            document.getElementById('btn-next-email').classList.add('show');
        }

        function nextEmail() {
            currentEmail++;
            
            // Re-enable answer buttons
            document.querySelector('.btn-safe').disabled = false;
            document.querySelector('.btn-phishing').disabled = false;
            
            // Hide next button
            document.getElementById('btn-next-email').classList.remove('show');
            
            if (currentEmail < emails.length) {
                showEmail();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
                showFinalScreen();
            }
        }

        function showFeedback(isCorrect, email) {
            const feedback = document.getElementById('feedback');
            feedback.className = 'feedback show ' + (isCorrect ? 'correct' : 'incorrect');
            
            let html = '';
            if (isCorrect) {
                html = '<h3>‚úÖ Correto! Bem feito!</h3>';
                if (email.isPhishing) {
                    html += '<p><strong>Identificaste bem o phishing!</strong> Aqui est√£o os sinais de alerta:</p>';
                    html += '<div class="red-flag"><strong>üö© Sinais de Alerta Identificados:</strong><ul>';
                    email.redFlags.forEach(flag => {
                        html += `<li>${flag}</li>`;
                    });
                    html += `</ul></div><p>${email.explanation}</p>`;
                } else {
                    html += `<p><strong>Exato!</strong> Este email era seguro. ${email.explanation}</p>`;
                }
            } else {
                html = '<h3>‚ùå Ups! N√£o foi desta vez.</h3>';
                if (email.isPhishing) {
                    html += '<p><strong>Este era phishing!</strong> Aqui est√£o os sinais que devias ter visto:</p>';
                    html += '<div class="red-flag"><strong>üö© Sinais de Alerta que Perdeste:</strong><ul>';
                    email.redFlags.forEach(flag => {
                        html += `<li>${flag}</li>`;
                    });
                    html += `</ul></div><p>${email.explanation}</p>`;
                } else {
                    html += `<p><strong>Este email era seguro!</strong> ${email.explanation}</p>`;
                    html += '<p>üí° <strong>Dica:</strong> Nem todos os emails s√£o phishing. Aprende a reconhecer os sinais verdadeiros de perigo!</p>';
                }
            }
            
            feedback.innerHTML = html;
        }

        function updateScores() {
            document.getElementById('correct').textContent = correctAnswers;
            document.getElementById('total').textContent = currentEmail + 1;
            document.getElementById('streak').textContent = streak;
        }

        function showFinalScreen() {
            document.getElementById('game-area').style.display = 'none';
            const finalScreen = document.getElementById('final-screen');
            finalScreen.classList.add('show');
            
            document.getElementById('final-correct').textContent = correctAnswers;
            
            let badge = 'üèÜ';
            let message = '';
            
            if (correctAnswers === 10) {
                badge = 'üèÜ';
                message = 'PERFEITO! √âs um Expert em Seguran√ßa Digital!';
            } else if (correctAnswers >= 8) {
                badge = 'ü•á';
                message = 'Excelente! Tens muito bom olho para burlas!';
            } else if (correctAnswers >= 6) {
                badge = 'ü•à';
                message = 'Bom trabalho! Continua atento online!';
            } else if (correctAnswers >= 4) {
                badge = 'ü•â';
                message = 'Precisas praticar mais. Tenta novamente!';
            } else {
                badge = 'üìö';
                message = 'Cuidado! Rev√™ as dicas e tenta outra vez.';
            }
            
            document.getElementById('badge').textContent = badge;
            document.getElementById('final-message').textContent = message;
            
            // Resumo de aprendizagem
            let learningHTML = '';
            const uniqueFlags = new Set();
            
            emails.forEach(email => {
                if (email.isPhishing) {
                    email.redFlags.forEach(flag => uniqueFlags.add(flag));
                }
            });
            
            uniqueFlags.forEach(flag => {
                learningHTML += `<li>${flag}</li>`;
            });
            
            document.getElementById('learning-points').innerHTML = learningHTML;
        }

        function restartGame() {
            document.getElementById('final-screen').classList.remove('show');
            startGame();
        }
    </script>
</body>
</html>